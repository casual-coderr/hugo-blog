<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><title>Create your own Bit.ly Service Using Cloudflare Workers - My Digital Garden</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=https://casual-coderr.github.io/hugo-blogfavicon.png><link rel=stylesheet href=/hugo-blog/css/style.min.fb5d1282ef81826b431e78c8cb0de3c94f82b2a0d338e8ac55d15b4f155c3ea3.css><meta name=description content="Suppose you have a team document that should always be available in abc.com/constant but the document origin should keep changing and that too for free. Well if this is what you want to achieve, then I’ve got you covered."><meta property="og:title" content="Create your own Bit.ly Service Using Cloudflare Workers"><meta property="og:type" content="website"><meta property="og:url" content="https://casual-coderr.github.io/hugo-blog/blog/cloudflare-redirector/"><meta property="og:description" content="Suppose you have a team document that should always be available in abc.com/constant but the document origin should keep changing and that too for free. Well if this is what you want to achieve, then I’ve got you covered."><meta name=twitter:card content="summary"><meta name=twitter:site content="@zerostaticio"><meta name=twitter:creator content="@zerostaticio"><link rel=preconnect href=https://fonts.gstatic.com><link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel=stylesheet></head><body class='page frame page-default-single'><div id=menu-main-mobile class=menu-main-mobile><ul class=menu><li class=menu-item-about><a href=https://casual-coderr.github.io/hugo-blog/pages/about/>About</a></li><li class=menu-item-blog><a href=https://casual-coderr.github.io/hugo-blog/blog/>Blog</a></li><li class=menu-item-gre><a href=https://casual-coderr.github.io/hugo-blog/gre/>GRE</a></li></ul></div><div id=wrapper class=wrapper><div class=header><a class=header-logo href=https://casual-coderr.github.io/hugo-blog>My Digital Garden</a><div class=menu-main><ul><li class=menu-item-about><a href=/hugo-blog/pages/about/>About</a></li><li class=menu-item-blog><a href=/hugo-blog/blog/>Blog</a></li><li class=menu-item-gre><a href=/hugo-blog/gre/>GRE</a></li></ul></div><div id=toggle-menu-main-mobile class=hamburger-trigger><button class=hamburger>Menu</button></div></div><div class=intro><h1>Create your own Bit.ly Service Using Cloudflare Workers<span class=dot>.</span></h1></div><div class=content><p>Do you use Bitly or Bit.ly Service ?</p><p>Mostly in your life you would have used any one of the link shortening services such as bitly, cuttly or any other service either for sharing a google doc or some article with a long link into a short one.</p><p>But the problem with bit.ly and other services is that you can’t customise the url portion like cutt.ly/rishi-is-awesome.</p><p>Even if you can customise it, you can’t change the origin url without using their premium plans.</p><p>Suppose you have a team document that should always be available in abc.com/constant but the document origin should keep changing and that too for free. Well if this is what you want to achieve, then I’ve got you covered.</p><h2 id=introducing-cloudflare-workers-and-kv->Introducing Cloudflare Workers and KV !!</h2><p>You don’t need to be an expert to use this method simply following this ten steps can give you a lifetime free url shortener and that too in your customisable domain for free.</p><p>Step 1:</p><p>Create a Cloudflare Account if you don’t already have one.</p><p><img src=https://miro.medium.com/max/875/1*kFzunhhNrm8mEBB5K7gABw.png alt></p><p>Cloudflare</p><p>Step 2:</p><p>After the verification of email login into your account and you can see</p><p><img src=https://miro.medium.com/max/370/1*S8zSVzPN1jTFv04IgALDBg.png alt></p><p>Click on Workers</p><p>It will ask you to create a subdomain for workers. You can give any name you want so feel free to get a catchy name before someone else does.</p><p>Step 3:</p><p>Click on KV and create Namespace</p><p><img src=https://miro.medium.com/max/875/1*Me2KyzL5PMx7CKfhX5V7Ng.png alt></p><p>Give it a easy name and click add</p><p><img src=https://miro.medium.com/max/875/1*tiIbI0rbm5yJpSG9VOT-tw.png alt></p><p>Step 4:</p><p>Click on Overview on left and click create a service</p><p><img src=https://miro.medium.com/max/875/1*hWVShpCT3ewhFfk0UH-n4w.png alt></p><p>Now you can give a service url so that ur service is accessible like url.yourdomain.workers.dev/your-link</p><p><img src=https://miro.medium.com/max/875/1*se9ZgrOHjhsmV1jvDyIN7Q.png alt></p><p>click on Create Service</p><p>Step 5:</p><p>Your service will be created</p><p><img src=https://miro.medium.com/max/875/1*7jiZnb9v06G0Z-hFarWVHg.png alt></p><p>now click on quick edit</p><p><img src=https://miro.medium.com/max/875/1*_Qo_bpNZISDFGg02ez2-QA.png alt></p><p>Go to this link and copy paste this code into the left pane</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>! function(e) {    var t = {};    function n(r) {        if (t[r]) return t[r].exports;        var o = t[r] = {            i: r,            l: !1,            exports: {}        };        return e[r].call(o.exports, o, o.exports, n), o.l = !0, o.exports    }    n.m = e, n.c = t, n.d = function(e, t, r) {        n.o(e, t) || Object.defineProperty(e, t, {            enumerable: !0,            get: r        })    }, n.r = function(e) {        &#34;undefined&#34; != typeof Symbol &amp;&amp; Symbol.toStringTag &amp;&amp; Object.defineProperty(e, Symbol.toStringTag, {            value: &#34;Module&#34;        }), Object.defineProperty(e, &#34;__esModule&#34;, {            value: !0        })    }, n.t = function(e, t) {        if (1 &amp; t &amp;&amp; (e = n(e)), 8 &amp; t) return e;        if (4 &amp; t &amp;&amp; &#34;object&#34; == typeof e &amp;&amp; e &amp;&amp; e.__esModule) return e;        var r = Object.create(null);        if (n.r(r), Object.defineProperty(r, &#34;default&#34;, {                enumerable: !0,                value: e            }), 2 &amp; t &amp;&amp; &#34;string&#34; != typeof e)            for (var o in e) n.d(r, o, function(t) {                return e[t]            }.bind(null, o));        return r    }, n.n = function(e) {        var t = e &amp;&amp; e.__esModule ? function() {            return e.default        } : function() {            return e        };        return n.d(t, &#34;a&#34;, t), t    }, n.o = function(e, t) {        return Object.prototype.hasOwnProperty.call(e, t)    }, n.p = &#34;&#34;, n(n.s = 0)}([function(e, t, n) {    &#34;use strict&#34;;    Object.defineProperty(t, &#34;__esModule&#34;, {        value: !0    });    const r = n(1);    addEventListener(&#34;fetch&#34;, e =&gt; {        const t = e.request;        &#34;GET&#34; === t.method ? e.respondWith((0, r.handleRequest)(t)) : e.respondWith(new Response(null, {            status: 405,            statusText: &#34;Method Not Allowed&#34;        }))    })}, function(e, t, n) {    &#34;use strict&#34;;    Object.defineProperty(t, &#34;__esModule&#34;, {        value: !0    }), t.handleRequest = void 0, t.handleRequest = async function(e) {        const t = new URL(e.url),            n = t.pathname,            r = t.host + t.pathname,            o = await REDIRECT_KV.get(r) || await REDIRECT_KV.get(n);        if (!o || &#34;404&#34; === o) {            const n = await REDIRECT_KV.get(t.host + &#34;/404&#34;) || await REDIRECT_KV.get(&#34;404&#34;);            return &#34;pass&#34; === n ? fetch(e) : n ? Response.redirect(n, 301) : new Response(&#34;Sorry, page not found.&#34;, {                status: 404,                statusText: &#34;page not found&#34;            })        }        if (&#34;pass&#34; === o) return fetch(e);        const s = new URL(o);        Array.from(t.searchParams).forEach(([e, t]) =&gt; {            !1 === s.searchParams.has(e) &amp;&amp; s.searchParams.set(e, t)        });        const a = s.toString();        return Response.redirect(a, 301)    }}]);
</span></span></code></pre></div><p><img src=https://miro.medium.com/max/875/1*MgCAPpos5xPjndUTZpztvw.png alt></p><p>Click on Save and Deploy</p><p>Step 6:</p><p><img src=https://miro.medium.com/max/875/1*BxD6dKIhuuAW_nCiCSOXZA.png alt></p><p>Click Settings and Click Variables</p><p><img src=https://miro.medium.com/max/875/1*pnklRS1AI3lGuHfvz4LHjA.png alt></p><p>Scroll Down and click on Add binding</p><p><img src=https://miro.medium.com/max/875/1*4nQv00J3RkN0ayyVB2Xpew.png alt></p><p>Type Variable name as</p><p>REDIRECT_KV and select the KV you created from the drop down list and click save</p><p>Step 7:</p><p>Now click on KV again from the left pane. It will be under Workers</p><p><img src=https://miro.medium.com/max/419/1*WwmjWmQU0rf9FmVJslUhkQ.png alt></p><p>Click on the KV you created and type the key as your short url and the value as destination</p><p><img src=https://miro.medium.com/max/875/1*NuL7S75Sa8CAYFUQpLL4ZQ.png alt></p><p>For example if i want to go to google.com and my short link should be search i will type</p><p>search in key and <a href=https://google.com/>https://google.com</a> in value</p><p>Click on Add entry and you are done</p><p>Step 8:</p><blockquote><p>Now you have a working Redirect Service under your <strong><em>project.domainname</em></strong>.workers.dev/<strong>xxx</strong></p></blockquote><p><img src=https://miro.medium.com/max/875/1*8mqFURdX4rS6qEk6-jdQmA.png alt></p><p>If you Directly go to your domain <strong><em>project.domainname</em></strong>.workers.dev then it will say page not found. If you type the correct short-url you made then it will be successfully redirected.</p><p>Oh Did I mention 10 steps at the beginning ?</p><p>Then other two steps are to follow me and share this article to your friends so that even they can own a private service like bittly.</p></div><div class=footer><div class=footer-social><span class="social-icon social-icon-twitter"><a href=https://twitter.com title=twitter target=_blank rel=noopener><img src=/hugo-blog/images/social/twitter.svg width=24 height=24 alt=twitter></a></span>
<span class="social-icon social-icon-github"><a href=https://github.com title=github target=_blank rel=noopener><img src=/hugo-blog/images/social/github.svg width=24 height=24 alt=github></a></span>
<span class="social-icon social-icon-linkedin"><a href=https://www.linkedin.com title=linkedin target=_blank rel=noopener><img src=/hugo-blog/images/social/linkedin.svg width=24 height=24 alt=linkedin></a></span></div></div></div><script type=text/javascript src=/hugo-blog/js/bundle.min.5993fcb11c07dea925a3fbd58c03c7f1857197c35fccce3aa963a12c0b3c9960.js></script></body></html>